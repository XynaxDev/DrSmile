{% extends 'layout/base.html' %}

{% block navbar %}
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
    <!-- Use container-fluid + px-3 for slight horizontal padding -->
    <div class="container-fluid px-3">
        <!-- Row 1: Brand & Toggler always visible -->
        <div class="d-flex w-100 align-items-center justify-content-between">
            <!-- Left side: New Chat + Brand -->
            <div class="d-flex align-items-center">
                <a href="{{ url_for('new_chat') }}" class="new-chat-link me-2" data-bs-toggle="tooltip"
                    data-bs-placement="bottom" title="New Chat">
                    <i class="bi bi-box-arrow-in-down-left bold-box"></i>
                </a>
                <a class="navbar-brand mb-0" style="font-weight: 750; color: #9a9a9a;" href="{{ url_for('chatbot') }}">
                    DrSmile
                </a>
            </div>

            <!-- Right side: Toggler on mobile -->
            <button class="navbar-toggler d-lg-none me-2" type="button" onclick="toggleSidebar()"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>

        <!-- Row 2: Nav links (visible on large screens) -->
        <div class="collapse navbar-collapse d-none d-lg-flex justify-content-end mt-2" id="navbarNav">
            <ul class="navbar-nav align-items-center">
                {% if session.get('logged_in') %}
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('dashboard') }}" data-bs-toggle="tooltip"
                        data-bs-placement="bottom" title="Dashboard">
                        Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('logout') }}" data-bs-toggle="tooltip"
                        data-bs-placement="bottom" title="Logout">
                        Logout
                    </a>
                </li>
                {% else %}
                <li class="nav-item">
                    <a class="nav-link lgin" href="{{ url_for('login') }}" data-bs-toggle="tooltip"
                        data-bs-placement="bottom" title="Login to DrSmile">
                        Login
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('register') }}" data-bs-toggle="tooltip"
                        data-bs-placement="bottom" title="Register a new account">
                        Register
                    </a>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>

<!-- Custom Mobile Sidebar (no Bootstrap offcanvas) -->
<div id="mobileSidebar" class="mobile-sidebar">
    <div class="sidebar-header">
        <h5 class="sidebar-title">Menu</h5>
        <button type="button" class="btn-close text-reset" onclick="toggleSidebar()" aria-label="Close"></button>
    </div>
    <div class="sidebar-body">
        <ul class="navbar-nav">
            {% if session.get('logged_in') %}
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('dashboard') }}" data-bs-toggle="tooltip"
                    data-bs-placement="bottom" title="Dashboard">
                    Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('logout') }}" data-bs-toggle="tooltip" data-bs-placement="bottom"
                    title="Logout">
                    Logout
                </a>
            </li>
            {% else %}
            <li class="nav-item">
                <a class="nav-link lgin" href="{{ url_for('login') }}" data-bs-toggle="tooltip"
                    data-bs-placement="bottom" title="Login to DrSmile">
                    Login
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('register') }}" data-bs-toggle="tooltip" data-bs-placement="bottom"
                    title="Register a new account">
                    Register
                </a>
            </li>
            {% endif %}
        </ul>
    </div>
</div>

<!-- Dark overlay -->
<div id="sidebarOverlay" class="sidebar-overlay" onclick="toggleSidebar()"></div>
{% endblock %}